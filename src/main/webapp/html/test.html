<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>使用json和jQuery实现列表框三级联动</title>
    <script type="text/javascript" src="../js/jquery-3.0.0.min.js"></script>
    <style type="text/css">
        body{font-size:13px}
        h3{padding: 0px;margin: 8px 0px}
        .iframe{width:360px;border: solid 1px #666}
        .iframe .title{padding: 5px;background-color: #eee}
        .iframe .content{padding: 8px;font-size: 12px}
    </style>
    <script type="text/javascript">
        //将json格式打数据保存在变量中
        var AreaData={
            "省份":{val:"",items:{"城市":{val:"",items:{"区县":""}}}},

            "天津市":{val:"02",items:
            {
                "所辖区":{val:"0201",items:
                {
                    "和平区":"020101","河东区":"020102"
                }
                },"所辖县":{val:"0202",items:{"宁河县":"020201","静海县":"020202"}}}
            },
            "上海市":{val:"03",items:
            {
                "所辖区":{val:"0301",items:
                {
                    "黄埔区":"030101","卢湾区":"030102"
                }
                },"所辖县":{val:"0302",items:{"崇明县":"030201"}}}
            }
        };
            var $s1=$("#sele1");
            var $s2=$("#sele2");
            var $s3=$("#sele3");
            var $t1=$("#Tip");
            var $t2="";
            var v1="01";
            var v2="0101";
            var v3="010101";
            $.each(AreaData,function (k,v) {
                appendOptTo($s1,k,v.val,v1);
            });
            function appendOptTo($o,k,v,d) {
                var $opt=$("<option>").text(k).val(v);
                if(v==d){$opt.attr("selected","true")}
                $opt.appendTo($o);
            };
            $s1.change(function () {
                $s2.html("");
                $s3.html("");
                if(this.selectedIndex==-1) return;
                var s1_curr_val=this.options[this.selectedIndex].value;
                var s1_curr_txt=this.options[this.selectedIndex].text;
                $.each(AreaData,function (k,v) {
                    if(s1_curr_val==v.val){
                        if(v.items){
                            $.each(v.items,function (k,v) {
                                appendOptTo($s2,k,v.val,v2);
                            });
                        }
                    }
                });
                $t2=s1_curr_txt;
                $t1.html($s2);
                $s2.change();
            }).change();
            $s2.change(function () {
                $s3.html("");
                var s1_curr_val=$s1[0].options[$s1[0].selectedIndex].value;
                if (this.selectedIndex==-1) return;
                var s2_curr_val=this.options[this.selectedIndex].value;
                $.each(AreaData,function (k,v) {
                    if(s1_curr_val==v.val){
                        if(v.items){
                            $.each(v.items,function (k,v) {
                                if(s2_curr_val==v.val){
                                    $.each(v.items,function (k,v) {
                                        appendOptTo($s3,k,v,v3);
                                    });
                                }
                            });
                        }
                    }
                });
                showChangeItem();
            }).change();
            //编写三个下拉菜单改变事件
            $s3.change(function () {
                showChangeItem();
            });
            //将列表框选择内容显示在页面中的函数
            function showChangeItem() {
                var s1_curr_txt=$s1[0].options[$s1[0].selectedIndex].text;
                var s2_curr_txt=$s2[0].options[$s2[0].selectedIndex].text;
                var s3_curr_txt=$s3[0].options[$s3[0].selectedIndex].text;
                $t2="您选择的是："+s1_curr_txt+">"+s2_curr_txt+">"+s3_curr_txt;
                $t1.html($t2);
            }
        });
    </script>

</head>
<body>
 <div class="iframe">
     <div class="title">请选择省市：
         <select id="sele1" name="sele1"></select>
         <select id="sele2" name="sele2"></select>
         <select id="sele3" name="sele3"></select>
     </div>
     <div class="content">
         <div id="Tip"></div>
     </div>
 </div>
</body>
</html>